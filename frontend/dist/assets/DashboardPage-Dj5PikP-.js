import{j as e,N as y,d as C,r as m,L as x,c as N,V as v,b as L,a as T,R as q,f as p,g as _}from"./index-CWOytK02.js";import{C as F}from"./Container-B2IJJ6zG.js";import{u as b,f as I}from"./eventStore-DNyPLHkZ.js";import{a as w,E as M}from"./EmptyState-BjjxJwVE.js";import{B as E}from"./Button-UG-mUu5T.js";import{u as R,I as j}from"./Input-DldwwwgG.js";import{S as A}from"./Select-CCXKwBWU.js";const B=()=>{const a=({isActive:s})=>`flex items-center px-4 py-2 rounded-md text-sm font-medium ${s?"bg-primary-100 text-primary-700":"text-gray-700 hover:bg-gray-100"}`;return e.jsx("nav",{className:"bg-white rounded-lg shadow-md p-4 mb-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-4",children:[e.jsxs(y,{to:"/dashboard",className:a,end:!0,children:[e.jsx("i",{className:"bi bi-speedometer2 mr-2"}),"Dashboard"]}),e.jsxs(y,{to:"/dashboard/my-events",className:a,children:[e.jsx("i",{className:"bi bi-calendar-event mr-2"}),"My Events"]}),e.jsxs(y,{to:"/dashboard/saved-events",className:a,children:[e.jsx("i",{className:"bi bi-bookmark-heart mr-2"}),"Saved Events"]}),e.jsxs(y,{to:"/dashboard/create-event",className:a,children:[e.jsx("i",{className:"bi bi-plus-circle mr-2"}),"Create Event"]})]})})},U=({stats:a})=>{const{totalEvents:s,upcomingEvents:i,savedEvents:t}=a;return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 rounded-full bg-primary-100 text-primary-600",children:e.jsx("i",{className:"bi bi-calendar-event text-2xl"})}),e.jsxs("div",{className:"ml-5",children:[e.jsx("p",{className:"text-gray-500 text-sm",children:"Total Events"}),e.jsx("h3",{className:"text-3xl font-bold text-gray-900",children:s})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 rounded-full bg-green-100 text-green-600",children:e.jsx("i",{className:"bi bi-calendar-check text-2xl"})}),e.jsxs("div",{className:"ml-5",children:[e.jsx("p",{className:"text-gray-500 text-sm",children:"Upcoming Events"}),e.jsx("h3",{className:"text-3xl font-bold text-gray-900",children:i})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 rounded-full bg-secondary-100 text-secondary-600",children:e.jsx("i",{className:"bi bi-bookmark-heart text-2xl"})}),e.jsxs("div",{className:"ml-5",children:[e.jsx("p",{className:"text-gray-500 text-sm",children:"Saved Events"}),e.jsx("h3",{className:"text-3xl font-bold text-gray-900",children:t})]})]})})]})},Y=()=>{const{user:a}=C(),{fetchUserEvents:s,fetchSavedEvents:i,userEvents:t,savedEventDetails:c,isLoading:n}=b(),[r,d]=m.useState({totalEvents:0,upcomingEvents:0,savedEvents:0});return m.useEffect(()=>{s(),i()},[s,i]),m.useEffect(()=>{if(t.length>0||c.length>0){const l=new Date,o=t.filter(u=>new Date(u.date)>=l).length;d({totalEvents:t.length,upcomingEvents:o,savedEvents:c.length})}},[t,c]),e.jsxs("div",{children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:["Welcome, ",a==null?void 0:a.name,"!"]}),e.jsx("p",{className:"text-gray-600 mb-6",children:"This is your dashboard where you can manage your events, view your saved events, and create new ones."}),e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsxs(x,{to:"/dashboard/create-event",className:"btn btn-primary",children:[e.jsx("i",{className:"bi bi-plus-circle mr-2"}),"Create New Event"]}),e.jsxs(x,{to:"/events",className:"btn btn-outline",children:[e.jsx("i",{className:"bi bi-search mr-2"}),"Browse Events"]})]})]}),e.jsx(U,{stats:r}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Your Recent Events"}),e.jsx(x,{to:"/dashboard/my-events",className:"text-primary-600 hover:text-primary-800 text-sm font-medium",children:"View All"})]}),n?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx("div",{className:"w-10 h-10 border-4 border-primary-200 border-t-primary-600 rounded-full animate-spin"})}):t.length>0?e.jsx("div",{className:"space-y-4",children:t.slice(0,3).map(l=>e.jsxs("div",{className:"flex items-center p-4 border border-gray-100 rounded-lg hover:bg-gray-50",children:[e.jsx("img",{src:l.image||"https://placehold.co/100x100/cccccc/333333?text=Event",alt:l.title,className:"w-16 h-16 rounded object-cover mr-4",crossOrigin:"anonymous",onError:o=>{o.target.onerror=null,o.target.src="https://placehold.co/100x100/cccccc/333333?text=Event"}}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 truncate",children:l.title}),e.jsxs("p",{className:"text-xs text-gray-500",children:[e.jsx("i",{className:"bi bi-calendar-event mr-1"}),new Date(l.date).toLocaleDateString()]})]}),e.jsx(x,{to:`/events/${l._id}`,className:"text-primary-600 hover:text-primary-800",children:e.jsx("i",{className:"bi bi-arrow-right"})})]},l._id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-gray-500 mb-4",children:"You haven't created any events yet."}),e.jsx(x,{to:"/dashboard/create-event",className:"btn btn-primary",children:"Create Your First Event"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Saved Events"}),e.jsx(x,{to:"/dashboard/saved-events",className:"text-primary-600 hover:text-primary-800 text-sm font-medium",children:"View All"})]}),n?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx("div",{className:"w-10 h-10 border-4 border-primary-200 border-t-primary-600 rounded-full animate-spin"})}):c.length>0?e.jsx("div",{className:"space-y-4",children:c.slice(0,3).map(l=>e.jsxs("div",{className:"flex items-center p-4 border border-gray-100 rounded-lg hover:bg-gray-50",children:[e.jsx("img",{src:l.image||"https://placehold.co/100x100/cccccc/333333?text=Event",alt:l.title,className:"w-16 h-16 rounded object-cover mr-4",crossOrigin:"anonymous",onError:o=>{o.target.onerror=null,o.target.src="https://placehold.co/100x100/cccccc/333333?text=Event"}}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 truncate",children:l.title}),e.jsxs("p",{className:"text-xs text-gray-500",children:[e.jsx("i",{className:"bi bi-calendar-event mr-1"}),new Date(l.date).toLocaleDateString()]})]}),e.jsx(x,{to:`/events/${l._id}`,className:"text-primary-600 hover:text-primary-800",children:e.jsx("i",{className:"bi bi-arrow-right"})})]},l._id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-gray-500 mb-4",children:"You haven't saved any events yet."}),e.jsx(x,{to:"/events",className:"btn btn-primary",children:"Browse Events"})]})]})]})]})},$=({events:a,onDelete:s,onEdit:i})=>{const[t,c]=m.useState(null),n=r=>{c(t===r?null:r)};return!a||a.length===0?e.jsx(w,{title:"No events found",message:"You haven't created any events yet.",action:e.jsx(x,{to:"/dashboard/create-event",className:"btn btn-primary",children:"Create Your First Event"})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Event"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date & Time"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(r=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsx("img",{className:"h-10 w-10 rounded-full object-cover",src:r.image||"https://placehold.co/100x100/cccccc/333333?text=Event",alt:r.title,crossOrigin:"anonymous",onError:d=>{d.target.onerror=null,d.target.src="https://placehold.co/100x100/cccccc/333333?text=Event"}})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:r.title}),e.jsx("button",{className:"text-xs text-primary-600 hover:text-primary-800",onClick:()=>n(r._id),children:t===r._id?"Hide details":"Show details"}),t===r._id&&e.jsx("div",{className:"mt-2 text-sm text-gray-500 max-w-md",children:r.description})]})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-gray-900",children:I(new Date(r.date),"MMM dd, yyyy")}),e.jsx("div",{className:"text-sm text-gray-500",children:r.time})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:r.location})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-primary-100 text-primary-800",children:r.category.charAt(0).toUpperCase()+r.category.slice(1)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(x,{to:`/events/${r._id}`,className:"text-indigo-600 hover:text-indigo-900",children:"View"}),e.jsx("button",{onClick:()=>i(r),className:"text-blue-600 hover:text-blue-900",children:"Edit"}),e.jsx("button",{onClick:()=>s(r._id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})})]},r._id))})]})})},V=()=>{const a=N(),{fetchUserEvents:s,deleteEvent:i,userEvents:t,isLoading:c}=b();m.useEffect(()=>{s()},[s]);const n=d=>{a(`/dashboard/edit-event/${d._id}`)},r=async d=>{if(window.confirm("Are you sure you want to delete this event? This action cannot be undone."))try{await i(d),v.success("Event deleted successfully")}catch{v.error("Failed to delete event")}};return e.jsx("div",{children:e.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2 sm:mb-0",children:"My Events"}),e.jsxs(E,{variant:"primary",onClick:()=>a("/dashboard/create-event"),children:[e.jsx("i",{className:"bi bi-plus-circle mr-2"}),"Create Event"]})]})}),e.jsx("div",{className:"p-6",children:c?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx("div",{className:"w-12 h-12 border-4 border-primary-200 border-t-primary-600 rounded-full animate-spin"})}):e.jsx($,{events:t,onDelete:r,onEdit:n})})]})})},O=()=>{const{fetchSavedEvents:a,savedEventDetails:s,isLoading:i}=b();return m.useEffect(()=>{a()},[a]),e.jsxs("div",{children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Saved Events"}),e.jsx("p",{className:"text-gray-600",children:"Events you've saved for later. Click on an event to view details or remove it from your saved list."})]}),i?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx("div",{className:"w-12 h-12 border-4 border-primary-200 border-t-primary-600 rounded-full animate-spin"})}):s.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(t=>e.jsx(M,{event:t},t._id))}):e.jsx(w,{title:"No saved events",message:"You haven't saved any events yet. Browse events and save the ones you're interested in.",action:e.jsx(x,{to:"/events",className:"btn btn-primary",children:"Browse Events"})})]})},S=m.forwardRef(({label:a,name:s,error:i,className:t="",...c},n)=>e.jsxs("div",{className:`mb-4 ${t}`,children:[a&&e.jsx("label",{htmlFor:s,className:"block text-sm font-medium text-gray-700 mb-1",children:a}),e.jsx("textarea",{ref:n,id:s,name:s,className:`w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent ${i?"border-red-500":"border-gray-300"}`,...c}),i&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:i})]}));S.displayName="Textarea";const H=[{value:"music",label:"Music"},{value:"sports",label:"Sports"},{value:"food",label:"Food & Drink"},{value:"arts",label:"Arts & Culture"},{value:"technology",label:"Technology"},{value:"workshops",label:"Workshops"}],D=({onSubmit:a,initialData:s=null,isSubmitting:i=!1})=>{var d,l,o,u,g,h,f;const{register:t,handleSubmit:c,formState:{errors:n},reset:r}=R({defaultValues:s||{title:"",description:"",date:"",time:"",location:"",category:"music",image:""}});return m.useEffect(()=>{if(s){const k={...s,date:s.date?new Date(s.date).toISOString().split("T")[0]:""};r(k)}},[s,r]),e.jsxs("form",{onSubmit:c(a),className:"space-y-6",children:[e.jsx(j,{label:"Event Title",...t("title",{required:"Title is required",minLength:{value:3,message:"Title must be at least 3 characters"}}),error:(d=n.title)==null?void 0:d.message,placeholder:"Enter event title"}),e.jsx(S,{label:"Description",...t("description",{required:"Description is required",minLength:{value:10,message:"Description must be at least 10 characters"}}),error:(l=n.description)==null?void 0:l.message,placeholder:"Describe your event",rows:4}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(j,{label:"Date",type:"date",...t("date",{required:"Date is required"}),error:(o=n.date)==null?void 0:o.message}),e.jsx(j,{label:"Time",type:"time",...t("time",{required:"Time is required"}),error:(u=n.time)==null?void 0:u.message})]}),e.jsx(j,{label:"Location",...t("location",{required:"Location is required"}),error:(g=n.location)==null?void 0:g.message,placeholder:"Enter event location"}),e.jsx(A,{label:"Category",...t("category",{required:"Category is required"}),error:(h=n.category)==null?void 0:h.message,options:H}),e.jsx(j,{label:"Image URL (optional)",...t("image"),error:(f=n.image)==null?void 0:f.message,placeholder:"Enter image URL for your event"}),e.jsx("div",{className:"flex justify-end",children:e.jsx(E,{type:"submit",variant:"primary",isLoading:i,disabled:i,children:s?"Update Event":"Create Event"})})]})},P=()=>{const a=N(),{createEvent:s}=b(),[i,t]=m.useState(!1),c=async n=>{t(!0);try{await s(n),v.success("Event created successfully"),a("/dashboard/my-events")}catch(r){v.error("Failed to create event"),console.error("Error creating event:",r)}finally{t(!1)}};return e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Create New Event"}),e.jsx(D,{onSubmit:c,isSubmitting:i})]})},W=()=>{const{id:a}=L(),s=N(),{fetchEventById:i,updateEvent:t}=b(),[c,n]=m.useState(null),[r,d]=m.useState(!0),[l,o]=m.useState(!1);m.useEffect(()=>{(async()=>{try{const h=await i(a);n(h)}catch{v.error("Failed to fetch event details"),s("/dashboard/my-events")}finally{d(!1)}})()},[i,a,s]);const u=async g=>{o(!0);try{await t(a,g),v.success("Event updated successfully"),s("/dashboard/my-events")}catch(h){v.error("Failed to update event"),console.error("Error updating event:",h)}finally{o(!1)}};return r?e.jsx(T,{}):e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Edit Event"}),e.jsx(D,{onSubmit:u,initialData:c,isSubmitting:l})]})},ee=()=>e.jsx("div",{className:"py-12 bg-gray-50",children:e.jsxs(F,{children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Dashboard"}),e.jsx("p",{className:"text-lg text-gray-600",children:"Manage your events and preferences"})]}),e.jsx(B,{}),e.jsxs(q,{children:[e.jsx(p,{index:!0,element:e.jsx(Y,{})}),e.jsx(p,{path:"my-events",element:e.jsx(V,{})}),e.jsx(p,{path:"saved-events",element:e.jsx(O,{})}),e.jsx(p,{path:"create-event",element:e.jsx(P,{})}),e.jsx(p,{path:"edit-event/:id",element:e.jsx(W,{})}),e.jsx(p,{path:"*",element:e.jsx(_,{to:"/dashboard",replace:!0})})]})]})});export{ee as default};
